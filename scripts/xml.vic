#!/bin/vic
:START
call argus
	Ce jmp END

call load
	Ce jmp skip

call printtop
free 1
:skip
free 1
jmp START

:printtop
	chr print -1$, 1
	ret

:argus
	alloc 1
	staptr 0$!
	cmp 0$!, 0
	free 1
	ret

:load
	alloc 2
	flen 0$!, -1$, 1$!
	i8 cmp 1$!, -1
		Ce free 2
		chr Ce print "The following file does not exist: ", 1
		Ce print -1$, 0
		Ce ret
	i32
	fread 0$, -1$, 0, 0
	free 1
	ret

:END
